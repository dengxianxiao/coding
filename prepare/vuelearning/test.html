<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

  <ul id="test">
    <li>第一条</li>
    <li>第二条</li>
    <li>第三条</li>
  </ul>
  
  <script>
    // 晓教育笔试题

    function f1() {
      let allKeys = [1, 2, 3]
      let userKeys = [3]
      function keys(a1, a2) {
        return allKeys.filter(value => userKeys.indexOf(value) === -1)
      }
      console.log(keys(allKeys, userKeys))
    }


    // 点击获取元素索引
    function f2() {
      let ul = document.getElementById('test')
      let lis = Array.from(ul.children)
      ul.addEventListener('click', function(e) {
        if (e.target.nodeName.toLowerCase() === 'li') {
          for (let i = 0; i < lis.length; i++) {
            if (e.target.innerText === lis[i].innerText) {
              alert(i)
            }
          }
        }
      })

    }
    
    // 深度拷贝
    function f3() {
      function deepCopy(obj) {
        if (!obj) return
        let newObj = obj instanceof Array ? [] : {}
        for (let key in obj) {
          if (typeof obj[key] === 'object') {
            newObj[key] = obj[key] instanceof Array ? []: {}
            newObj[key] = deepCopy(obj[key])
          } else {
            newObj[key] = obj[key]
          }
        }
        return newObj
      }
      let obj = {
        a: 1,
        b: {
          c: 2,
          d: function() {console.log(3)}
        }
      }
      let arr = [1, 2, 3, [4, 5]]
      console.log(deepCopy(obj))
      console.log(deepCopy(arr))
    }
    
    function f4() {
      let a = {a: 1}
      let b = {b: 2}
      // 和IIFE差不多
      !function(arg1, arg2) { // 赋值给新的值，不是引用，a不会改变
        arg1 = arg2 
        arg2['c'] = 3
      }(a, b)
      console.log(a, b) //{a: 1}, {b: 2, c: 3}
    }
    
    // 括号匹配，使用栈
    function f5() {
      function fn(arr) {
        let len = arr.length
        if (len % 2 !== 0) {
          return false
        }
        let leftBracket = ['{', '[', '(']
        let obj = {
          '{': '}',
          '[': ']',
          '(': ')'
        }
        let stack = []
        for (let i = 0; i < len; i++) {
          if (leftBracket.indexOf(arr[i]) !== -1) {
            stack.unshift(arr[i])
          } else {
            let tmp = stack.shift()
            if (obj[tmp] !== arr[i]) break
          }
        }
        return stack.length === 0
      }

      let arr = ['{', '[', '}', ']']
      let arr1 = ['{', '[', '(', ')', ']', '}']
      console.log(fn(arr))
    }
    
    // 对象按照某个属性排序
    function f6() {
      function compare(a, b, propA, propB) {      
        propA = propA.toUpperCase()
        propB = propB.toUpperCase()
        if (propA > propB) {
          return 1
        }
        if (propA < propB) {
          return -1
        }
        return 0
      }
      // 对象按照firstName + lastName + ext 排序
      function sortArr(arr) {
        arr.sort((a, b) => compare(a, b, a.ext, b.ext))
        arr.sort((a, b) => compare(a, b, a.lastName, b.lastName))
        arr.sort((a, b) => compare(a, b, a.firstName, b.firstName))
        return arr
      }

      let arr = [
        {
          firstName: 'bb',
          lastName: 'bbb',
          ext: ''
        },
        {
          firstName: 'cc',
          lastName: 'ccc',
          ext: ''
        },
        {
          firstName: 'aa',
          lastName: 'aaa',
          ext: 'aaa'
        }
      ]

      console.log(sortArr(arr))
    }
    
  </script>
</body>
</html>