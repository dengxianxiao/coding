<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>postMessage 2</title>
</head>
<body>
  <div id="postMessage2">123</div>
  <script>
    var data;
    var url = 'http://localhost:3000'
    function receiveMessage(event) {
      if (event.origin !== url) {
        return
      }
      document.getElementById('postMessage2').innerText = event.data
      console.log(event.data)
      
      // 返回信息
      event.source.postMessage('hello postMessage1 from postMessage2', event.origin)
   
    }
    window.addEventListener("message", receiveMessage, false)

  //   window.onmessage = function(e){
  //     console.log(e)
  //     e = e || event;
  //     alert(e.data); //立即弹出a发送过来的数据
  //     e.source.postMessage("好的，请稍等三秒！",e.origin); //立即回复a
  //     var postData = {name:"tsrot",age:24};
  //     var strData = JSON.stringify(postData); //json对象转化为字符串
  //     setTimeout(function(){
  //       e.source.postMessage(strData,e.origin);
  //     },3000); //3秒后向a发送数据
	// }
  </script>
</body>
</html>